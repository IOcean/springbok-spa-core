!function(){"use-strict";var e=["pascalprecht.translate","ngSanitize","ngRoute"],t=angular.module("springbok.core",e);t.run(["endpoints",function(e){e.add("enums","public/constants")}])}(),function(){"use strict";function e(e,t,n,i){var a=!1;this.data={},this.ready=t.defer(),this.load=function(){var t=this;a===!1&&e.get(i.get("enums")).success(function(e){t.data=e,a=!0,t.ready.resolve()}).error(function(){n.error("enumsService is not loaded"),t.ready.reject()})},this.isReady=function(){return this.ready.promise},this.getData=function(e){return this.data[e]},this.getDataByValue=function(e,t){var n=this.getData(e);return _.findWhere(n,{value:t})}}angular.module("springbok.core").service("enums",e),e.$inject=["$http","$q","$log","endpoints"]}(),function(){"use strict";function e(e,t){this.apiRootPath="",this.routes={},this.setApiRootPath=function(e){this.apiRootPath=t.addSlashAtTheEndIfNotPresent(e)},this.add=function(e,t){this.routes[e]=t},this.get=function(t,n){var i=this.routes[t];return s.isBlank(this.apiRootPath)&&e.debug("The API root path has not been set, call setApiRootPath(apiRootPath) to set the API root path, example : endpoints.setApiRootPath('http://client.iocean.fr/api/')"),this.apiRootPath+this.processParameters(i,n)},this.processParameters=function(e,n){return t.processUrlWithPathVariables(e,n,":")}}angular.module("springbok.core").service("endpoints",e),e.$inject=["$log","urlUtils"]}(),function(){"use strict";function e(e,t,n,i,a){var r="asc",s="desc",o="asc",c=function(e){this.configuration=e,this.createColumns(),this.initMaxPerPage(),this.getCriterias(),this.searched=!1,this.results={content:[],totalElements:0,currentPage:1}};return c.prototype.orderBy=function(e,t){this.configuration.currentOrderBy=e,this.setDirectionFor(e,t),this.configuration.currentDirection=this.configuration.columns[e],this.search()},c.prototype.setDirectionFor=function(e,t){var n=this;_.isNull(t)||_.isUndefined(t)?this.configuration.columns[e]=this.configuration.columns[e]===r?s:r:this.configuration.columns[e]=t,Object.keys(this.configuration.columns,function(t){t!==e&&(n.configuration.columns[t]=o)})},c.prototype.maxPerPage=function(e){this.configuration.maxPerPage=e},c.prototype.search=function(t){var n=this;_.isNull(t)||_.isUndefined(t)||(n.results.currentPage=t);var i=this.buildCriterias();return _.isNull(n.configuration.criteriasKey)||_.isUndefined(n.configuration.criteriasKey)||a.set(n.configuration.criteriasKey,i.params),e.debug("Search configuration for "+this.configuration.criteriasKey,this.configuration),this.fetch(i)},c.prototype.buildCriterias=function(){var e=this,t={params:{}};return _.isUndefined(e.configuration.form)?e.configuration.form||(e.configuration.form={}):Object.keys(e.configuration.form).forEach(function(n){t.params[n]=_.isUndefined(e.configuration.form[n])?null:e.configuration.form[n]}),e.configuration.form.direction?(e.configuration.currentDirection=e.configuration.form.direction,delete e.configuration.form.direction):t.params.direction=e.configuration.currentDirection,e.configuration.form.properties?(e.configuration.currentOrderBy=e.configuration.form.properties,delete e.configuration.form.properties):t.params.properties=e.configuration.currentOrderBy,e.configuration.form.pageSize?(e.configuration.maxPerPage=e.configuration.form.pageSize,delete e.configuration.form.pageSize):t.params.pageSize=e.configuration.maxPerPage,e.configuration.form.pageNumber?delete e.configuration.form.pageNumber:t.params.pageNumber=e.results.currentPage-1,e.configuration.columns[t.params.properties]=t.params.direction,this.setDirectionFor(t.params.properties,t.params.direction),t},c.prototype.fetch=function(e){var a=this,r=t.defer();return n.get(a.configuration.endpoint,e).then(function(t){200===t.status&&(a.results=t.data,a.results.currentPage=e.params.pageNumber+1,a.searched=!0,i.extendsPagedDataWithWalker(a.results)),r.resolve(a.results)},function(e){r.reject({reason:e.status})}),r.promise},c.prototype.initMaxPerPage=function(){(_.isNull(this.configuration.allMaxPerPage)||_.isUndefined(this.configuration.allMaxPerPage)||_.isEmpty(this.configuration.allMaxPerPage))&&(this.configuration.allMaxPerPage=i.defaultAllMaxPerPage),(_.isNull(this.configuration.maxPerPage)||_.isUndefined(this.configuration.maxPerPage))&&(this.configuration.maxPerPage=_.first(i.defaultAllMaxPerPage))},c.prototype.createColumns=function(){var e=this;e.configuration.columns={},e.configuration.columnList.forEach(function(t){e.configuration.columns[t.name]=t.name!==e.configuration.currentOrderBy?o:e.configuration.currentDirection})},c.prototype.getCriterias=function(){a.has(this.configuration.criteriasKey)&&(this.configuration.form=a.get(this.configuration.criteriasKey))},c}angular.module("springbok.core").factory("Search",e),e.$inject=["$log","$q","$http","pagination","searchCriterias"]}(),function(){"use strict";function e(){var e=this;e.defaultAllMaxPerPage=[50,100,200,1e3,2e3],e.setDefaultAllMaxPerPage=function(t){e.defaultAllMaxPerPage=t},e.extendsPagedDataWithWalker=function(e){0===e.number?(e.currentPageFrom=1,e.currentPageTo=e.numberOfElements<e.size?e.numberOfElements:e.size):(e.currentPageFrom=e.number*e.size+1,e.currentPageTo=e.numberOfElements<e.size?e.totalElements:e.currentPageFrom-1+e.size)}}angular.module("springbok.core").service("pagination",e)}(),function(){"use strict";function e(){return{restrict:"E",template:t,transclude:!0,replace:!0,scope:{search:"="}}}angular.module("springbok.core").directive("sbSearchFooter",e);var t='<div class="row"ng-show="search.results.totalElements > 0"><div class="col-sm-6"><div class="dataTables_info">{{\'SEARCH_RESULTS_CAPITALIZED\'| translate}} {{search.results.currentPageFrom}} {{\'SEARCH_TO\'| translate}} {{search.results.currentPageTo}} {{\'SEARCH_OF\'| translate}} {{search.results.totalElements}}</div></div><div class="col-sm-6"><uib-pagination boundary-links="true" items-per-page="search.configuration.maxPerPage" total-items="search.results.totalElements" ng-model="search.results.currentPage" ng-change="search.search()" class="pull-right pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination></div></div>;'}(),function(){"use strict";function e(){return{restrict:"E",template:t,transclude:!0,replace:!0,scope:{search:"="}}}angular.module("springbok.core").directive("sbSearchHeader",e);var t='<div class="table-header" style="margin-top: 1%"ng-show="search.searched">{{search.results.totalElements}} {{\'SEARCH_RESULTS_LOWERCASE\' | translate}}<div class="pull-right table-header-tools form-inline"><label for="maxPerPage">{{\'SEARCH_MAXPERPAGE\' | translate}}</label><select id="maxPerPage"class="input-small"style="margin: 0 10px"ng-model="search.configuration.maxPerPage"ng-options="maxPerPage for maxPerPage in search.configuration.allMaxPerPage"ng-change="search.search()"></select></div></div>'}(),function(){"use strict";function e(){var e={};this.set=function(t,n){void 0!==t&&void 0!==n&&(e[t]=n)},this.getAll=function(){return e},this.has=function(t){return e.hasOwnProperty(t)},this.get=function(t){return e[t]},this.remove=function(t){void 0!==e[t]&&(e[t]=void 0)},this.clear=function(){e={}}}angular.module("springbok.core").service("searchCriterias",e)}(),function(){"use strict";function e(){return function(e){return _.isNull&&_.isUndefined&&e===!0?"GLOBAL_ACTIVATED":"GLOBAL_DEACTIVATED"}}angular.module("springbok.core").filter("statusKey",e)}(),function(){"use strict";function e(){this.encodeToBase64=function(e){return window.btoa(unescape(encodeURIComponent(e)))}}angular.module("springbok.core").service("encryptionUtils",e)}(),function(){"use strict";function e(){this.addSlashAtTheEndIfNotPresent=function(e){if(!s.isBlank(e)){var t=e.lastIndexOf("/"),n=t===e.length-1;n||(e+="/")}return e},this.processUrlWithPathVariables=function(e,t,n){var i,a=e;return _.isUndefined(t)||!_.isObject(t)?a:(_.each(_.keys(t),function(r){i=n+r,s.include(e,i)&&(a=a.replace(i,t[r]))}),a)}}angular.module("springbok.core").service("urlUtils",e)}(),function(){"use strict";function e(e,t,n,i){return{request:function(n){var a=i.getCurrent();return a.token&&!i.isExpired()?(n.headers.Authorization=a.token,i.updateExpiration()):e.$broadcast("http-error-401"),n.headers["Accept-Language"]=i.language.substring(0,2),e.$broadcast("showSpinner"),n||t.when(n)},requestError:function(n){return e.$broadcast("showSpinner"),t.reject(n)},response:function(n){return e.$broadcast("hideSpinner"),n||t.when(n)},responseError:function(a){return e.$broadcast("hideSpinner"),401===a.status?(e.$broadcast("http-error-401"),i.clear(),n.path("/")):403===a.status?e.$broadcast("http-error-403"):404===a.status&&e.$broadcast("http-error-404"),t.reject(a)}}}angular.module("springbok.core").factory("httpInterceptor",e),e.$inject=["$rootScope","$q","$location","session"],angular.module("springbok.core").config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}])}(),function(){"use strict";function e(e){function t(){if(localStorage.account){var e=JSON.parse(localStorage.account);r.account=e}else a();return n(),r.account}function n(){var e=CONFIG.app.preferredLanguage;localStorage.language&&(e=localStorage.language),r.language=e}function i(){r.account.expiration=(new Date).getTime(),r.persist()}function a(){r.account||(r.account={}),r.account.infos={},r.account.expiration=null,r.account.authenticated=!1}var r=this;r.defaultExpirationDurationInMilliseconds=36e5,a(),t(),r.persist=function(){localStorage.account=JSON.stringify(r.account)},r.update=function(e){r.account.infos=e,r.account.authenticated=!0,r.persist()},r.isExpired=function(){var e=!0,t=(new Date).getTime(),n=r.account.expiration;if(!_.isNull(n)&&!_.isUndefined(n)){var i=t-n;e=i>=r.defaultExpirationDurationInMilliseconds}return e},r.updateExpiration=i,r.clear=function(){a(),localStorage.removeItem("account")},r.getCurrent=t,r.setTokenAndExpiration=function(){var t="Basic ";t+=e.encodeToBase64(r.account.username+":"+r.account.password),r.account.token=t,i(),r.persist()},r.updatePassword=function(e){r.account.password=e,r.setTokenAndExpiration()},r.setDefaultExpirationDurationInMilliseconds=function(e){r.defaultExpirationDurationInMilliseconds=e},r.setLanguage=function(e){r.language=e,localStorage.language=r.language},r.updateLanguage=n()}angular.module("springbok.core").service("session",e),e.$inject=["encryptionUtils"]}(),function(){"use strict";function e(e,t,n){var i=this;i.languages=t.list,i.change=function(i){t.has(i)&&(e.use(i),n.setLanguage(i))},i.get=function(e){return t.get(e)},i.change(n.language)}angular.module("springbok.core").controller("i18nController",e),e.$inject=["$translate","languages","session"]}(),function(){"use strict";function e(){var e=this;e.list=[{key:"fr_FR",i18nKey:"I18N_FRENCH"}],e.add=function(t,n){e.list.push({key:t,i18nKey:n})},e.get=function(t){return _.findWhere(e.list,{key:t})},e.has=function(t){return!_.isUndefined(e.get(t))},e.clear=function(){e.list=[]}}angular.module("springbok.core").service("languages",e)}(),function(){"use strict";function e(){return{restrict:"E",template:t,transclude:!0,replace:!0}}angular.module("springbok.core").directive("sbLanguagePicker",e);var t='<li id="sb-language-picker" class="green" ng-controller="i18nController as i18n"> <a data-toggle="dropdown" class="dropdown-toggle pointer" aria-expanded="false"> <span class="user-info"> <small>{{ \'I18N_LANGUAGE\' | translate}}</small> {{i18n.get(authentication.session.language).i18nKey | translate}} </span> <i class="ace-icon fa fa-caret-down"></i> </a> <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close"> <li ng-repeat="language in i18n.languages"> <a class="pointer" ng-click="i18n.change(language.key)"> <img width="15" ng-src="assets/images/i18n/{{language.key}}.png" alt="{{language.i18nKey | translate}} flag"/> {{language.i18nKey | translate }} </a> </li> </ul> </li>'}(),function(){"use strict";function e(e){e.preferredLanguage(CONFIG.app.preferredLanguage),e.useMissingTranslationHandlerLog(),e.useSanitizeValueStrategy(null)}angular.module("springbok.core").config(e),e.$inject=["$translateProvider"]}(),function(){"use strict";function e(e){e.debugEnabled(CONFIG.app.logDebugEnabled)}angular.module("springbok.core").config(e),e.$inject=["$logProvider"]}(),function(){"use strict";function e(){this.isOpen=!1,this.open=function(){this.isOpen=!0}}var t='<p class="input-group"> <input type="text" class="form-control" ng-model="$ctrl.dateModel" ng-required="{{$ctrl.dateRequired}}" name="{{$ctrl.dateFormFieldName}}" placeholder="jj/mm/aaaa" uib-datepicker-popup="dd/MM/yyyy" is-open="$ctrl.isOpen" on-open-focus="true" current-text="{{\'GLOBAL_TODAY\' | translate}}" clear-text="{{\'GLOBAL_RESET\' | translate}}" close-text="{{\'GLOBAL_CLOSE\' | translate}}" /> <span class="input-group-btn"> <button type="button" class="btn" style="padding: 2px" ng-click="$ctrl.open()"> <i class="ace-icon fa fa-calendar-o"></i> </button> </span> </p><div ng-messages="$ctrl.dateFormName[$ctrl.dateFormFieldName].$error"> <span ng-message="date" class="form-error-red">{{\'FORM_DATEFORMAT_INVALID\' | translate}}</span> </div>';angular.module("springbok.core").component("sbDatePicker",{template:t,controller:e,bindings:{dateRequired:"<",dateModel:"=",dateFormName:"=",dateFormFieldName:"<"}})}(),function(){"use strict";function e(e){var t=this;t.isMinified=!1,t.items=e.all,t.collapseMenu=function(){t.isMinified=!t.isMinified},t.resetState=function(){t.items.forEach(function(e){e.isActive=!1,t.hasSubItems(e)&&(e.isSubMenuOpened=!1,e.subItems.forEach(function(e){e.isActive=!1}))})},t.hasSubItems=function(e){return!_.isNull(e.subItems)&&!_.isUndefined(e.subItems)},t.toggle=function(e,n){var i=!e.isSubMenuOpened,a=!_.isNull(n)&&!_.isUndefined(n);t.resetState(),t.hasSubItems(e)?i&&(e.isSubMenuOpened=!0):(a&&(n.isSubMenuOpened=!0),e.isActive=!0)}}angular.module("springbok.core").controller("menuController",e),e.$inject=["menuItems"]}(),function(){"use strict";function e(){var e=this;e.all=[],e.add=function(t){e.all.push(t)},e.isEmpty=function(){return _.isEmpty(e.all)},e.clear=function(){e.all=[]}}angular.module("springbok.core").service("menuItems",e)}(),function(){"use strict";function e(){return{restrict:"E",template:t,transclude:!0,replace:!0,link:function(e,t,n){"false"===n.showLogo?e.showLogo=!1:e.showLogo=!0}}}angular.module("springbok.core").directive("sbMenu",e);var t='<div ng-controller="menuController as menu"><div ng-if="showLogo" class="sidebar-shortcuts-large text-center"><a ng-href="#/"><img src="assets/images/logo.png" width="100" alt="Logo"/></a></div><div ng-if="showLogo" class="sidebar-shortcuts-mini text-center"><a ng-href="#/"><img src="assets/images/logo.png" width="30" alt="Logo"/></a></div><ul class="nav nav-list"><li ng-repeat="item in menu.items" ng-if="item.isAuthorized" ng-class="{\'active\' : item.isActive}"><!-- Items without submenu --><a ng-href="{{item.url}}" class="pointer" ng-if="!menu.hasSubItems(item)" ng-click="menu.toggle(item)" ng-class="[item.cssClass, item.backgroundCssClass]"><i class="menu-icon fa" ng-class="item.icon"></i><span class="menu-text">{{item.labelKey | translate}}</span></a><!-- Items with submenu --><a class="pointer" ng-if="menu.hasSubItems(item)" ng-click="menu.toggle(item)" ng-class="[item.cssClass, item.backgroundCssClass]"><i class="menu-icon fa" ng-class="item.icon"></i><span class="menu-text">{{item.labelKey | translate}}</span><b class="arrow fa fa-angle-down"></b></a><ul class="submenu" ng-class="{\'nav-hide\' : !item.isSubMenuOpened, \'nav-show\' : item.isSubMenuOpened}"><li ng-repeat="subItem in item.subItems" ng-if="subItem.isAuthorized" ng-class="{\'active\' : subItem.isActive}"><a ng-href="{{subItem.url}}" class="pointer" ng-click="menu.toggle(subItem, item)" ng-class="[subItem.cssClass, subItem.backgroundCssClass]"><i class="menu-icon fa fa-angle-double-right"></i><span class="menu-text">{{subItem.labelKey | translate}}</span></a></ul></li></ul><div id="sidebar-collapse" class="sidebar-toggle sidebar-collapse" ng-click="menu.collapseMenu()"><i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left" ng-class="{\'fa-angle-double-right\' : menu.isMinified, \'fa-angle-double-left\' : !isMinified}"></i></div></div>'}(),function(){"use strict";function e(e){var t=this,n={delay:5e3,type:"info",raw:!1};t.setDefaultDelay=function(e){n.delay=e||n.delay},t.display=function(t,i){i=i||n.delay,t.show=!0,_.isNull(t)||_.isUndefined(t)||e(function(){t.show=!1},i)},t.create=function(e,t,i){return e=e||n.type,i=i||n.raw,{show:!1,type:e,message:t,raw:i}}}angular.module("springbok.core").service("notification",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",template:t,transclude:!0,replace:!0,scope:{type:"@",raw:"=",message:"=",show:"="},link:function(e,t,n){e.close=function(){e.show=!1},n.$observe("type",function(t){switch(t){case"info":e.typeClass="alert-info";break;case"success":e.typeClass="alert-success";break;case"warning":e.typeClass="alert-warning";break;case"error":e.typeClass="alert-danger";break;default:e.typeClass="alert-info"}})}}}angular.module("springbok.core").directive("sbNotification",e);var t='<div ng-show="show" class="alert fixed-notification {{typeClass}}" style="z-index: 2000; position: fixed; width: 25%; top: 5%; right: 0.5%;"><p style="float: left; width: 95%;">   <span ng-if="raw">message</span>   <span ng-if="!raw">{{message | translate}}</span></p><button type="button" class="close" ng-click="close()" width: 5%;><i class="fa fa-times"></i></button></div>'}();